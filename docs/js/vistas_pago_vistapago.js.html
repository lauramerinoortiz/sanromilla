<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: vistas/pago/vistapago.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: vistas/pago/vistapago.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict" //activo modo estricto

/**
 * Clase de la Vista Pago
 */
export class VistaPago{
    constructor(controlador,inscripciones, correo){
        this.inscripciones=inscripciones
        this.controlador=controlador
        this.correo=correo
        window.setTimeout(this.iniciar.bind(this), 500)
    }

    /**
     * Método que inicia la vista y genera el código de inscripción
     * Lo manda al controlador para que lo inserte
     */
    async iniciar(){
        console.log(this.correo)
        this.codigo=document.getElementById('codigo')
        this.codigo.textContent='espere...'
        this.codigo_inscripcion=Math.floor(Math.random() * 99999);
        let valores=await this.controlador.sacarCodigos()
        // Guardamos los codigos que están en la base de datos en un set
        this.introducidos=new Set(valores)

        // Comprobamos que si el que se ha generado existe, vuelva a generar otro
        while(this.introducidos.has(this.codigo_inscripcion)){
            this.codigo_inscripcion=Math.floor(Math.random() * 99999);
        }

        // Lo insertamos en la vista
        this.codigo.textContent=this.codigo_inscripcion
        // Introducimos el codigo en el registro de la inscripción
        await this.controlador.insertarInscripciones(this.inscripciones, this.codigo_inscripcion, this.correo)
        
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Controlador.html">Controlador</a></li><li><a href="InscripcionModel.html">InscripcionModel</a></li><li><a href="Modelo.html">Modelo</a></li><li><a href="Router.html">Router</a></li><li><a href="VistaClasificacion.html">VistaClasificacion</a></li><li><a href="VistaConfirmacion.html">VistaConfirmacion</a></li><li><a href="VistaFotos.html">VistaFotos</a></li><li><a href="VistaInscripcion.html">VistaInscripcion</a></li><li><a href="VistaPago.html">VistaPago</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Jun 12 2023 20:24:29 GMT+0200 (hora de verano de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
